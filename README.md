# CARLA自动驾驶模型

## 交叉路口自动驾驶功能

系统支持在遇到交叉路口时执行以下操作:

1. 自动检测交叉路口并安全停止
2. 拍摄交叉路口图像
3. 查询Ollama大模型"car"进行决策
4. 处理大模型返回的JSON格式响应
5. 基于响应使用MPC控制器生成安全轨迹
6. 沿着生成的轨迹安全通过交叉路口

### 交叉路口检测逻辑

系统使用以下逻辑来识别交叉路口:

- 交叉路口定义: 具有**多个出口选择**的路口才被视为交叉路口
- 如果道路分叉点只有一个出口选择，则不视为交叉路口，车辆将继续正常行驶
- 系统会计算路口的出口数量，并将这一信息提供给大模型以辅助决策

### 要求

- Ollama 已安装并运行
- "car" 模型已加载 (支持多模态图像输入)
- Python 3.7+
- CARLA 0.9.14+

### 使用方法

1. 确保Ollama服务运行在本地11434端口
2. 确保"car"模型可用
3. 运行CARLA服务器
4. 启动自动驾驶模型: `python main.py`
